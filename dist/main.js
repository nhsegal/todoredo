(()=>{"use strict";const e=function(e,t,a,n=null){const o=Math.floor(1e8*Math.random());let d=new Date(e);return d.setHours(0,0,0,0),{date:d,content:t,isCompleted:!1,priority:a,project:n,id:o}},t=(e,t)=>{const a=e.date-t.date;return 0!==a?a:e.priority!==t.priority?"normal"===e.priority?1:-1:e.content.localeCompare(t.content)},a=function(){const e=[],a=()=>{e.sort(t)};return{data:e,displayedList:[],editTask:(t,a,n)=>{for(let o=0;o<e.length;o++)if(e[o].id==t.id)return void(e[o][a]=n);console.log("I couldn't find that task!")},sortByDate:a,produceTasksInAProject:t=>{let a=e.filter((e=>e.project===t));return a},getListOfProjects:()=>{const t=[];return e.forEach((e=>{null==e.project||""===e.project||t.some((t=>t===e.project))||t.push(e.project)})),t},removeTask:t=>{e.splice(e.indexOf(t),1)},addTask:t=>{e.push(t),a()}}}(),n={main:document.querySelector("main"),body:document.querySelector("body"),sideBar:document.querySelector("#sidebar"),todaysTasksSideBar:document.querySelector("#todays-tasks"),thisWeekSideBar:document.querySelector("#this-week"),allTasksSideBar:document.querySelector("#all-tasks"),get addTaskBtn(){return document.querySelector("#add-a-task")},get addTaskForm(){return document.querySelector("#task-form")},get addTaskModal(){return document.querySelector("#add-a-task-modal")},get closeModalButton(){return document.querySelector("#close-modal-button")},get newTaskContent(){return document.querySelector("#task-content")},get newTaskDate(){return document.querySelector("#date")},get newTaskPriority(){return[...document.querySelectorAll("input[name=priority]")]},get newTaskProject(){return document.querySelector("#project")},get cardEditBtns(){return[...document.querySelectorAll(".edit-task")]},get cardRemoveBtns(){return[...document.querySelectorAll(".remove-task")]},get cardCheckBoxs(){return[...document.querySelectorAll('[name="isCompletedCheckbox"]')]},get listByProject(){return document.querySelector("#list-by-project")},get sidebarProjectList(){const e=document.getElementById("list-by-project").children,t=[];for(const a of e)t.push(a.firstChild);return t},get sidebarProjectListRemoveBtns(){const e=document.getElementById("list-by-project").children,t=[];for(const a of e)t.push(a.lastChild);return t}};function o(e){const t=document.createElement("input");t.type="checkbox",t.name="isCompletedCheckbox",t.setAttribute("data-id",e.id),t.checked=e.isCompleted,t.id=e.content;const a=document.createElement("div");a.classList.add("task-name"),a.setAttribute("data-id",e.id),a.textContent=e.content;const n=document.createElement("div");n.classList.add("task-due-date"),n.setAttribute("data-id",e.id),n.textContent=`Due: ${e.date.toLocaleString("default",{weekday:"short"})},\n        ${e.date.toLocaleString("default",{month:"short"})}. \n        ${e.date.getDate()} `;const o=document.createElement("button");o.classList.add("edit-task"),o.classList.add("material-icons"),o.setAttribute("data-id",e.id),o.textContent="edit";const d=document.createElement("button");d.classList.add("remove-task"),d.classList.add("material-icons"),d.setAttribute("data-id",e.id),d.textContent="delete";const s=document.createElement("div");return s.classList.add("card"),s.setAttribute("data-id",e.id),"high"===e.priority&&s.classList.add("important"),s.append(t,a,n,o,d),t.checked?t.parentElement.classList.add("is-completed"):t.parentElement.classList.contains("is-completed")&&t.parentElement.classList.remove("is-completed"),s}function d(e,t,a=null){const d=new Date;d.setHours(0,0,0,0);const s=new Date(d);s.setDate(s.getDate()+1);const i=new Date(d);i.setDate(d.getDate()+7);let c=null,r=null,l=null;for(;n.main.firstChild;)n.main.removeChild(n.main.firstChild),e.displayedList.splice(0,e.displayedList.length);if("byProject"===t){const t=e.produceTasksInAProject(a),s=document.createElement("div");s.classList.add("heading"),s.textContent=a,n.main.append(s);for(let a=0;a<t.length;a++){if(t[a].date>=d&&t[a].date<=d&&null==c){c=1;const e=document.createElement("div");e.classList.add("subheading"),e.textContent="Today",n.main.append(e)}if(t[a].date>d&&1===c){c=null;const e=document.createElement("hr");n.main.append(e)}n.main.append(o(t[a])),e.displayedList.push(t[a])}}else for(let a=0;a<e.data.length;a++){if(e.data[a].date>=s&&"today"===t)return;if(e.data[a].date>i&&"this-week"===t)return;if(e.data[a].date<d&&null==r&&!1===e.data[a].isCompleted){r=1;const e=document.createElement("div");e.classList.add("heading"),e.textContent="Past Due",n.main.append(e)}if(e.data[a].date>=d&&1===r){r=2;const e=document.createElement("hr");n.main.append(e)}if(e.data[a].date>=d&&e.data[a].date<s&&null==c){c=1;const e=document.createElement("div");e.classList.add("heading"),e.textContent="Today",n.main.append(e)}if(e.data[a].date>=s&&1==c){c=2;const e=document.createElement("hr");n.main.append(e)}if(e.data[a].date<=i&&e.data[a].date>=s&&null==l){l=1;const e=document.createElement("div");e.classList.add("heading"),e.textContent="This Week",n.main.append(e)}if(e.data[a].date>i&&1===l){l=2;const e=document.createElement("hr");n.main.append(e)}(!1===e.data[a].isCompleted&&e.data[a].date<d||e.data[a].date>=d)&&(n.main.append(o(e.data[a])),e.displayedList.push(e.data[a]))}}function s(e){for(;n.sidebarProjectList.length;)n.listByProject.removeChild(n.listByProject.lastChild);e&&e.forEach((e=>{!function(e){const t=document.createElement("li"),a=document.createElement("a");a.id=e,a.href="#",a.textContent=e;const o=document.createElement("a");o.id=`${e}Remove`,o.href="#",o.classList.add("material-icons"),o.textContent="delete",t.append(a,o),n.listByProject.append(t)}(e)}))}const i={viewBy:"all",whichProject:null,update(e,t=null){this.viewBy=e,this.whichProject=t}};let c=!1,r=null;function l(e){document.querySelector(`[data-id="${e.id}"] input`).addEventListener("change",(function(e){r=e.target.getAttribute("data-id");const t=a.data.filter((e=>e.id==r))[0];this.checked?(t.isCompleted=!0,e.target.parentElement.classList.add("is-completed"),a.editTask(t,"isCompleted",!0)):(t.isCompleted=!1,e.target.parentElement.classList.remove("is-completed"))})),document.querySelectorAll(`[data-id="${e.id}"] button`)[0].addEventListener("click",(t=>{c=!0,r=t.target.parentElement.getAttribute("data-id");const o=a.data.filter((e=>e.id==r))[0],d=o.date.getFullYear(),s=o.date.getMonth()+1,i=o.date.getDate();let l=String(1e4*d+100*s+i);l=`${l.slice(0,4)}-${l.slice(4,6)}-${l.slice(6,8)}`,n.newTaskContent.value=o.content,n.newTaskDate.value=l,n.newTaskProject.value=o.project;for(const t of n.newTaskPriority)t.value===e.priority&&(t.checked=!0);n.addTaskModal.classList.toggle("closed")})),document.querySelectorAll(`[data-id="${e.id}"] button`)[1].addEventListener("click",(e=>{r=e.target.parentElement.getAttribute("data-id");const t=a.data.filter((e=>e.id==r))[0];a.removeTask(t),localStorage.setItem("oldData",JSON.stringify(a.data)),a.displayedList.splice(a.displayedList.indexOf(t),1),localStorage.setItem("oldDisplayList",JSON.stringify(a.displayedList)),d(a,i.viewBy,i.whichProject),u()}))}function u(){for(const e of a.displayedList)l(e)}function m(){try{n.todaysTasksSideBar.addEventListener("click",(()=>{i.update("today",null),d(a,i.viewBy,i.whichProject),u()})),n.thisWeekSideBar.addEventListener("click",(()=>{i.update("this-week",null),d(a,i.viewBy,i.whichProject),u()})),n.allTasksSideBar.addEventListener("click",(()=>{i.update("all",null),d(a,i.viewBy,i.whichProject),u()}))}catch{console.log("failed to add today/week/all ELs")}}function p(){const e=function(e){confirm("Delete this project and all tasks in it?")?(a.produceProjectList(e.target.previousElementSibling.id).forEach((e=>a.removeTask(e))),localStorage.setItem("oldData",JSON.stringify(a.data)),localStorage.setItem("oldDisplayList",JSON.stringify(a.displayedList)),d(a,n.main,i.viewBy,i.whichProject),console.log(a.getListOfProjects()),s(a.getListOfProjects()),p(),u(),console.log(a.getListOfProjects())):console.log("You pressed Cancel!")};try{for(const e of n.sidebarProjectList){const t=e;t.addEventListener("click",(()=>{i.update("byProject",t.id),d(a,i.viewBy,i.whichProject),u()}))}for(const t of n.sidebarProjectListRemoveBtns){const n=t;n.addEventListener("click",(t=>{"byProject"===i.viewBy&&i.whichProject===n.previousElementSibling.id&&i.update("all"),e(t),d(a,i.viewBy,i.whichProject),u(),s(a.getListOfProjects()),p()}))}}catch{console.log("failed to add ELs to projects")}}!function(){const t=new Date;t.setHours(0,0,0,0);const o=new Date(t);o.setDate(t.getDate()-1);const l=new Date(t);l.setDate(t.getDate()+1),new Date(t).setDate(t.getDate()+2);const h=new Date(t);h.setDate(t.getDate()+8);const y=e(t,"Refactor tic-tac-toe program","normal"),k=e(t,"Buy milk","high"),g=e(l,"Buy birthday card","normal"),f=e(l,"Call mom","high"),v=e(l,"Do Ruby beginner tutorial","normal"),E=e(o,"Vacuum","high"),L=e(h,"Paint the shed","high");a.data.push(y),a.data.push(k),a.data.push(g),a.data.push(f),a.data.push(v),a.data.push(E),a.data.push(L),a.editTask(y,"project","Coding"),a.editTask(k,"project","Shopping"),a.editTask(g,"project","Shopping"),a.editTask(v,"project","Coding"),a.editTask(E,"project","Housework"),a.editTask(L,"project","Housework"),a.sortByDate(),d(a,"today",null),function(e,t){const a=document.createElement("div");a.classList.add("modal"),a.classList.add("closed"),a.id="add-a-task-modal";const n=document.createElement("div");n.classList.add("modal-content");const o=document.createElement("form");o.id="task-form";const d=document.createElement("div");d.textContent=" ";const s=document.createElement("div");s.textContent=" ";const i=document.createElement("div");i.id="close-modal-button",i.innerHTML="&times";const c=document.createElement("div");c.textContent=" ";const r=document.createElement("label");r.for="task-content",r.textContent="Task:";const l=document.createElement("input");l.type="text",l.id="task-content",l.name="task-content",l.placeholder="Enter Task",l.required=!0;const u=document.createElement("div");u.textContent=" ";const m=document.createElement("label");m.for="date",m.textContent="Due:";const p=document.createElement("div");p.textContent=" ";const h=document.createElement("input");h.type="date",h.id="date",h.name="date",h.required=!0;const y=document.createElement("div");y.textContent=" ";const k=document.createElement("div");k.textContent="Priority:";const g=document.createElement("div");g.id="priority-options";const f=document.createElement("div"),v=document.createElement("input");v.type="radio",v.id="normal",v.name="priority",v.value="normal",v.required=!0;const E=document.createElement("label");E.for="normal",E.textContent="Normal";const L=document.createElement("div"),w=document.createElement("input");w.type="radio",w.id="high",w.name="priority",w.value="high",w.required=!0;const j=document.createElement("label");j.for="high",j.textContent="High";const T=document.createElement("label");T.for="project",T.textContent="Project:";const C=document.createElement("input");C.name="project",C.id="project",C.placeholder="Optional",C.setAttribute("list","project-list");const S=document.createElement("datalist");S.id="project-list";for(let e=0;e<t.length;e++){const a=document.createElement("option");a.value=t[e],a.textContent=t[e],S.append(a)}C.append(S);const P=document.createElement("button");P.type="submit",P.id="modal-submit",P.value="Submit",P.textContent="Submit",f.append(v,E),L.append(w,j),g.append(f,L),o.append(d,s,i,r,l,c,m,h,u,k,g,p,T,C,y,P),n.append(o),a.append(n),e.append(a)}(n.body,a.getListOfProjects()),s(a.getListOfProjects()),function(){n.addTaskBtn.addEventListener("click",(()=>{c=!1,n.addTaskModal.classList.toggle("closed")})),n.closeModalButton.addEventListener("click",(()=>{n.addTaskModal.classList.toggle("closed"),n.newTaskContent.value=null,n.newTaskDate.value=null;for(const e of n.newTaskPriority)e.checked=!1;n.newTaskProject.value=null})),n.addTaskForm.addEventListener("submit",(function(t){if(t.preventDefault(),n.addTaskModal.classList.toggle("closed"),c){const e=a.data.filter((e=>e.id==r))[0];a.editTask(e,"content",n.newTaskContent.value);let t=new Date(n.newTaskDate.value);t.setHours(0,0,0,0),a.editTask(e,"date",t);const o=Array.from(n.newTaskPriority).filter((e=>e.checked))[0];a.editTask(e,"priority",o.value),a.editTask(e,"project",n.newTaskProject.value),a.sortByDate(),localStorage.setItem("oldData",JSON.stringify(a.data)),localStorage.setItem("oldDisplayList",JSON.stringify(a.displayedList))}else{let t=null;n.newTaskPriority.forEach((e=>{e.checked&&(t=e.value)}));const o=e(n.newTaskDate.value,n.newTaskContent.value,t,n.newTaskProject.value);a.addTask(o),a.sortByDate(),localStorage.setItem("oldData",JSON.stringify(a.data)),localStorage.setItem("oldDisplayList",JSON.stringify(a.displayedList))}n.newTaskContent.value=null,n.newTaskDate.value=null;for(const e of n.newTaskPriority)e.checked=!1;n.newTaskProject.value=null,d(a,n.main,i.viewBy,i.whichProject),s(a.getListOfProjects()),p(),m(),u(),a.sortByDate()}));try{n.todaysTasksSideBar.addEventListener("click",(()=>{i.update("today",null),d(a,i.viewBy,i.whichProject),u()})),n.thisWeekSideBar.addEventListener("click",(()=>{i.update("this-week",null),d(a,i.viewBy,i.whichProject),u()})),n.allTasksSideBar.addEventListener("click",(()=>{i.update("all",null),d(a,i.viewBy,i.whichProject),u()}))}catch{console.log("failed to add event listeners")}}(),u(),m(),p()}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFXQyxLQUFLQyxVQUFVLFNBQy9DSCxhQUFhQyxRQUNYLGlCQUNBQyxLQUFLQyxVQUFVLGlCQUVuQixLQUFPLENBQ0wsSUFBSW9ELEVBQXVCLEtBQzNCLDJCQUE2QnJHLElBQ3ZCQSxFQUFPbkIsVUFDVHdILEVBQXVCckcsRUFBT3pFLE1BQ2hDLElBRUYsTUFBTStLLEVBQVUsRUFDZCxvQkFDQSx1QkFDQUQsRUFDQSx3QkFFRixVQUFtQkMsR0FDbkIsZUFDQXhELGFBQWFDLFFBQVEsVUFBV0MsS0FBS0MsVUFBVSxTQUMvQ0gsYUFBYUMsUUFDWCxpQkFDQUMsS0FBS0MsVUFBVSxpQkFFbkIsQ0FHQSx1QkFBMkIsS0FDM0Isb0JBQXdCLEtBRXhCLElBQUssTUFBTWpELEtBQVUsa0JBQ25CQSxFQUFPbkIsU0FBVSxFQUVuQix1QkFBMkIsS0FDM0JpQixFQUNFLEVBQ0EsT0FDQSxTQUNBLGdCQUVGaUIsRUFBYyx1QkFDZHNDLElBQ0FELElBQ0FGLElBQ0EsY0FDRixJQXFCQSxJQUNFLHNDQUF3QyxTQUFTLEtBQy9DLFNBQXVCLFFBQVMsTUFDaENwRCxFQUNFLEVBQ0EsU0FDQSxnQkFFRm9ELEdBQXVCLElBR3pCLG1DQUFxQyxTQUFTLEtBQzVDLFNBQXVCLFlBQWEsTUFDcENwRCxFQUNFLEVBQ0EsU0FDQSxnQkFFRm9ELEdBQXVCLElBR3pCLG1DQUFxQyxTQUFTLEtBQzVDLFNBQXVCLE1BQU8sTUFDOUJwRCxFQUNFLEVBQ0EsU0FDQSxnQkFFRm9ELEdBQXVCLEdBSTNCLENBRkUsTUFDQXhILFFBQVFDLElBQUksZ0NBQ2QsQ0FDRixDQy9QRTRLLEdBQ0FyRCxJQUNBRSxJQUNBQyxHQUNGLENDcERBLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvcmVkby8uL3NyYy90YXNrLmpzIiwid2VicGFjazovL3RvZG9yZWRvLy4vc3JjL21hc3Rlckxpc3QuanMiLCJ3ZWJwYWNrOi8vdG9kb3JlZG8vLi9zcmMvRE9NQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vdG9kb3JlZG8vLi9zcmMvcmVuZGVyLmpzIiwid2VicGFjazovL3RvZG9yZWRvLy4vc3JjL2N1cnJlbnRTZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly90b2RvcmVkby8uL3NyYy9hZGRFTHMuanMiLCJ3ZWJwYWNrOi8vdG9kb3JlZG8vLi9zcmMvaW5pdGlhbFNldHVwLmpzIiwid2VicGFjazovL3RvZG9yZWRvLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvbnN0cnVjdG9yIHRvIG1ha2UgdGFzayBvYmplY3RzXG5jb25zdCBtYWtlVGFzayA9IGZ1bmN0aW9uIChkYXRlLCBjb250ZW50LCBwcmlvcml0eSwgcHJvamVjdCA9IG51bGwpIHtcbiAgbGV0IGlzQ29tcGxldGVkID0gZmFsc2U7XG4gIGNvbnN0IGlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMDAwKTtcbiAgbGV0IHRhc2tEYXRlID0gbmV3IERhdGUoZGF0ZSk7XG4gIHRhc2tEYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4ge1xuICAgIGRhdGU6IHRhc2tEYXRlLFxuICAgIGNvbnRlbnQsXG4gICAgaXNDb21wbGV0ZWQsXG4gICAgcHJpb3JpdHksXG4gICAgcHJvamVjdCxcbiAgICBpZCxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG1ha2VUYXNrO1xuIiwiY29uc3QgbWFzdGVyTGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgZGF0YSA9IFtdO1xuICBjb25zdCBkaXNwbGF5ZWRMaXN0ID0gW107XG5cbiAgY29uc3QgZWRpdFRhc2sgPSAodGFzaywgYXR0cmlidXRlLCB2YWx1ZSkgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRhdGFbaV0uaWQgPT0gdGFzay5pZCkge1xuICAgICAgICBkYXRhW2ldW2F0dHJpYnV0ZV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIkkgY291bGRuJ3QgZmluZCB0aGF0IHRhc2shXCIpO1xuICB9O1xuXG4gIGNvbnN0IHNvcnRCeURhdGUgPSAoKSA9PiB7XG4gICAgZGF0YS5zb3J0KHNvcnRCeURhdGVUaGVuUHJpb3JpdHlUaGVuQWxwaGEpO1xuICB9XG5cbiAgY29uc3QgcHJvZHVjZVRhc2tzSW5BUHJvamVjdCA9IChwcm9qZWN0KSA9PiB7XG4gICAgbGV0IGZpbHRlcmVkID0gZGF0YS5maWx0ZXIoICh0YXNrKSA9PiB0YXNrLnByb2plY3QgPT09IHByb2plY3QpO1xuICAgIHJldHVybiBmaWx0ZXJlZDtcbiAgfVxuXG4gIGNvbnN0IGdldExpc3RPZlByb2plY3RzID0gKCkgPT4ge1xuICAgIGNvbnN0IGFsbFByb2plY3RzID0gW107XG4gICAgZGF0YS5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBpZiAodGFzay5wcm9qZWN0ICE9IG51bGwgJiYgdGFzay5wcm9qZWN0ICE9PSAnJyAmJiAhYWxsUHJvamVjdHMuc29tZSgoYSkgPT4gYSA9PT0gdGFzay5wcm9qZWN0KSkge1xuICAgICAgICBhbGxQcm9qZWN0cy5wdXNoKHRhc2sucHJvamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGFsbFByb2plY3RzO1xuICB9XG5cbiAgY29uc3QgcmVtb3ZlVGFzayA9ICh0KSA9PiB7XG4gICAgZGF0YS5zcGxpY2UoZGF0YS5pbmRleE9mKHQpLCAxKTtcbiAgfVxuXG4gIGNvbnN0IGFkZFRhc2sgPSAodCkgPT4ge1xuICAgIGRhdGEucHVzaCh0KTtcbiAgICBzb3J0QnlEYXRlKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGRhdGEsXG4gICAgZGlzcGxheWVkTGlzdCxcbiAgICBlZGl0VGFzayxcbiAgICBzb3J0QnlEYXRlLFxuICAgIHByb2R1Y2VUYXNrc0luQVByb2plY3QsXG4gICAgZ2V0TGlzdE9mUHJvamVjdHMsXG4gICAgcmVtb3ZlVGFzayxcbiAgICBhZGRUYXNrXG4gIH1cbn1cblxuY29uc3Qgc29ydEJ5RGF0ZVRoZW5Qcmlvcml0eVRoZW5BbHBoYSA9IChhLGIpID0+IHtcbiAgY29uc3QgYnlEYXRlID0gYS5kYXRlIC0gYi5kYXRlO1xuICBpZiAoYnlEYXRlICE9PSAwKSB7XG4gICAgcmV0dXJuIGJ5RGF0ZTtcbiAgfVxuICBpZiAoYS5wcmlvcml0eSAhPT0gYi5wcmlvcml0eSkge1xuICAgIGlmIChhLnByaW9yaXR5ID09PSBcIm5vcm1hbFwiKSB7XG4gICAgICByZXR1cm4gMVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gIH1cbiAgcmV0dXJuIChhLmNvbnRlbnQubG9jYWxlQ29tcGFyZShiLmNvbnRlbnQpKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG1hc3Rlckxpc3QoKTtcbiIsImZ1bmN0aW9uIGRvbSgpIHtcbiAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbiAgY29uc3Qgc2lkZUJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaWRlYmFyJyk7XG4gIGNvbnN0IHRvZGF5c1Rhc2tzU2lkZUJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RheXMtdGFza3MnKTtcbiAgY29uc3QgdGhpc1dlZWtTaWRlQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RoaXMtd2VlaycpO1xuICBjb25zdCBhbGxUYXNrc1NpZGVCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWxsLXRhc2tzJyk7XG4gIFxuICAvLyBHZXR0ZXJzIGFyZSB1c2VkIGZvciBET00gZWxlbWVudHMgdGhhdCBjaGFuZ2VcbiAgcmV0dXJuIHtcbiAgICBtYWluLFxuICAgIGJvZHksXG4gICAgc2lkZUJhcixcbiAgICB0b2RheXNUYXNrc1NpZGVCYXIsXG4gICAgdGhpc1dlZWtTaWRlQmFyLFxuICAgIGFsbFRhc2tzU2lkZUJhcixcbiAgICBnZXQgYWRkVGFza0J0bigpIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLWEtdGFzaycpO1xuICAgIH0sXG4gICAgZ2V0IGFkZFRhc2tGb3JtKCkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXNrLWZvcm0nKTtcbiAgICB9LFxuICAgIGdldCBhZGRUYXNrTW9kYWwoKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1hLXRhc2stbW9kYWwnKTtcbiAgICB9LFxuICAgIGdldCBjbG9zZU1vZGFsQnV0dG9uKCkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjbG9zZS1tb2RhbC1idXR0b24nKTtcbiAgICB9LFxuICAgIGdldCBuZXdUYXNrQ29udGVudCgpIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzay1jb250ZW50Jyk7XG4gICAgfSxcbiAgICBnZXQgbmV3VGFza0RhdGUoKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKTtcbiAgICB9LFxuICAgIGdldCBuZXdUYXNrUHJpb3JpdHkoKSB7XG4gICAgICByZXR1cm4gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9cHJpb3JpdHldJyldO1xuICAgIH0sXG4gICAgZ2V0IG5ld1Rhc2tQcm9qZWN0KCkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0Jyk7XG4gICAgfSxcbiAgICBnZXQgY2FyZEVkaXRCdG5zKCkge1xuICAgICAgcmV0dXJuIFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdC10YXNrJyldO1xuICAgIH0sXG4gICAgZ2V0IGNhcmRSZW1vdmVCdG5zKCkge1xuICAgICAgcmV0dXJuIFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVtb3ZlLXRhc2snKV07XG4gICAgfSxcbiAgICBnZXQgY2FyZENoZWNrQm94cygpIHtcbiAgICAgIHJldHVybiBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW25hbWU9XCJpc0NvbXBsZXRlZENoZWNrYm94XCJdJyldO1xuICAgIH0sXG4gICAgZ2V0IGxpc3RCeVByb2plY3QoKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpc3QtYnktcHJvamVjdCcpO1xuICAgIH0sXG4gICAgZ2V0IHNpZGViYXJQcm9qZWN0TGlzdCgpIHtcbiAgICAgIGNvbnN0IG5vZGVMaXN0T2ZQcm9qZWN0TGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdC1ieS1wcm9qZWN0JykuY2hpbGRyZW47XG4gICAgICBjb25zdCBhcnIgPSBbXTtcbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2Ygbm9kZUxpc3RPZlByb2plY3RMaW5rcykge1xuICAgICAgICBhcnIucHVzaChjaGlsZC5maXJzdENoaWxkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnI7XG4gICAgfSxcbiAgICBnZXQgc2lkZWJhclByb2plY3RMaXN0UmVtb3ZlQnRucygpIHtcbiAgICAgIGNvbnN0IG5vZGVMaXN0T2ZQcm9qZWN0TGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdC1ieS1wcm9qZWN0JykuY2hpbGRyZW47XG4gICAgICBjb25zdCBhcnIgPSBbXTtcbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2Ygbm9kZUxpc3RPZlByb2plY3RMaW5rcykge1xuICAgICAgICBhcnIucHVzaChjaGlsZC5sYXN0Q2hpbGQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFycjtcbiAgICB9XG4gIH07XG59XG5jb25zdCBET00gPSBkb20oKTtcbmV4cG9ydCBkZWZhdWx0IERPTTtcbiIsImltcG9ydCBET00gZnJvbSAnLi9ET01DYWNoZSc7XG5cbmZ1bmN0aW9uIHJlbmRlckNhcmQodGFzaykge1xuICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIGNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xuICBjaGVja2JveC5uYW1lID0gJ2lzQ29tcGxldGVkQ2hlY2tib3gnO1xuICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCB0YXNrLmlkKTtcbiAgY2hlY2tib3guY2hlY2tlZCA9IHRhc2suaXNDb21wbGV0ZWQ7XG4gIGNoZWNrYm94LmlkID0gdGFzay5jb250ZW50O1xuXG4gIGNvbnN0IHRhc2tOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRhc2tOYW1lLmNsYXNzTGlzdC5hZGQoJ3Rhc2stbmFtZScpO1xuICB0YXNrTmFtZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCB0YXNrLmlkKTtcbiAgdGFza05hbWUudGV4dENvbnRlbnQgPSB0YXNrLmNvbnRlbnQ7XG5cbiAgY29uc3QgdGFza0R1ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB0YXNrRHVlLmNsYXNzTGlzdC5hZGQoJ3Rhc2stZHVlLWRhdGUnKTtcbiAgdGFza0R1ZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCB0YXNrLmlkKTtcbiAgdGFza0R1ZS50ZXh0Q29udGVudCA9IGBEdWU6ICR7dGFzay5kYXRlLnRvTG9jYWxlU3RyaW5nKCdkZWZhdWx0JywgeyB3ZWVrZGF5OiAnc2hvcnQnIH0pfSxcbiAgICAgICAgJHt0YXNrLmRhdGUudG9Mb2NhbGVTdHJpbmcoJ2RlZmF1bHQnLCB7IG1vbnRoOiAnc2hvcnQnIH0pfS4gXG4gICAgICAgICR7dGFzay5kYXRlLmdldERhdGUoKX0gYDtcblxuICBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGVkaXRCdG4uY2xhc3NMaXN0LmFkZCgnZWRpdC10YXNrJyk7XG4gIGVkaXRCdG4uY2xhc3NMaXN0LmFkZCgnbWF0ZXJpYWwtaWNvbnMnKTtcbiAgZWRpdEJ0bi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCB0YXNrLmlkKTtcbiAgZWRpdEJ0bi50ZXh0Q29udGVudCA9ICdlZGl0JztcblxuICBjb25zdCByZW1vdmVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgcmVtb3ZlQnRuLmNsYXNzTGlzdC5hZGQoJ3JlbW92ZS10YXNrJyk7XG4gIHJlbW92ZUJ0bi5jbGFzc0xpc3QuYWRkKCdtYXRlcmlhbC1pY29ucycpO1xuICByZW1vdmVCdG4uc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgdGFzay5pZCk7XG4gIHJlbW92ZUJ0bi50ZXh0Q29udGVudCA9ICdkZWxldGUnO1xuXG4gIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY2FyZC5jbGFzc0xpc3QuYWRkKCdjYXJkJyk7XG4gIGNhcmQuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgdGFzay5pZCk7XG4gIGlmICh0YXNrLnByaW9yaXR5ID09PSAnaGlnaCcpIHtcbiAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2ltcG9ydGFudCcpO1xuICB9XG4gIGNhcmQuYXBwZW5kKGNoZWNrYm94LCB0YXNrTmFtZSwgdGFza0R1ZSwgZWRpdEJ0biwgcmVtb3ZlQnRuKTtcbiAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2lzLWNvbXBsZXRlZCcpO1xuICB9IGVsc2UgaWYgKGNoZWNrYm94LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1jb21wbGV0ZWQnKSkge1xuICAgIGNoZWNrYm94LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtY29tcGxldGVkJyk7XG4gIH1cbiAgcmV0dXJuIChjYXJkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlck1haW4obWFzdGVyTGlzdCwgb3B0aW9uLCBieVByb2plY3ROYW1lID0gbnVsbCkge1xuICBcbiAgLy8gRGVmaW5lIHRvZGF5LCB0b21vcnJvdywgYSB3ZWVrIGZyb20gdG9kYXkgZm9yIGRpc3BsYXkgb3B0aW9uc1xuICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICBjb25zdCB0b21vcnJvdyA9IG5ldyBEYXRlKHRvZGF5KTtcbiAgdG9tb3Jyb3cuc2V0RGF0ZSh0b21vcnJvdy5nZXREYXRlKCkgKyAxKTtcblxuICBjb25zdCB3ZWVrRnJvbVRvZGF5ID0gbmV3IERhdGUodG9kYXkpO1xuICB3ZWVrRnJvbVRvZGF5LnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgNyk7XG5cbiAgbGV0IHRvZGF5R3JvdXAgPSBudWxsO1xuICBsZXQgcGFzdER1ZSA9IG51bGw7XG4gIGxldCB3ZWVrR3JvdXAgPSBudWxsO1xuXG4gIC8vIFJlbW92ZSBldmVyeXRoaW5nIGZyb20gbWFpbiBhbmQgZnJvbSBtYXN0ZXJMaXN0LlxuICAvLyBTaG91bGQgcmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBmcm9tIGZpcnN0Q2hpbGRcblxuICAvKlxuICBmb3IgKGxldCBpID0gMDsgaSA8IERPTS5jYXJkQ2hlY2tCb3hzLmxlbmd0aDsgaSsrKSB7XG4gICAgRE9NLmNhcmRFZGl0QnRuc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGVkaXRUYXNrKTtcbiAgICBET00uY2FyZFJlbW92ZUJ0bnNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW1vdmVUYXNrKTs7XG4gICAgLy9ET00uY2FyZENoZWNrQm94c1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gIH0qL1xuXG4gIHdoaWxlIChET00ubWFpbi5maXJzdENoaWxkKSB7XG4gICAgRE9NLm1haW4ucmVtb3ZlQ2hpbGQoRE9NLm1haW4uZmlyc3RDaGlsZCk7XG4gICAgbWFzdGVyTGlzdC5kaXNwbGF5ZWRMaXN0LnNwbGljZSgwLCBtYXN0ZXJMaXN0LmRpc3BsYXllZExpc3QubGVuZ3RoKTtcbiAgfVxuXG4gIGlmIChvcHRpb24gPT09ICdieVByb2plY3QnKSB7XG4gICAgY29uc3QgcHJvamVjdExpc3QgPSBtYXN0ZXJMaXN0LnByb2R1Y2VUYXNrc0luQVByb2plY3QoYnlQcm9qZWN0TmFtZSk7XG4gICAgY29uc3QgcHJvamVjdEhlYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBwcm9qZWN0SGVhZGluZy5jbGFzc0xpc3QuYWRkKCdoZWFkaW5nJyk7XG4gICAgcHJvamVjdEhlYWRpbmcudGV4dENvbnRlbnQgPSBieVByb2plY3ROYW1lO1xuICAgIERPTS5tYWluLmFwcGVuZChwcm9qZWN0SGVhZGluZyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9qZWN0TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHByb2plY3RMaXN0W2ldLmRhdGUgPj0gdG9kYXkgJiYgcHJvamVjdExpc3RbaV0uZGF0ZSA8PSB0b2RheSAmJiB0b2RheUdyb3VwID09IG51bGwpIHtcbiAgICAgICAgdG9kYXlHcm91cCA9IDE7XG4gICAgICAgIGNvbnN0IHRvZGF5SGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0b2RheUhlYWRpbmcuY2xhc3NMaXN0LmFkZCgnc3ViaGVhZGluZycpO1xuICAgICAgICB0b2RheUhlYWRpbmcudGV4dENvbnRlbnQgPSAnVG9kYXknO1xuICAgICAgICBET00ubWFpbi5hcHBlbmQodG9kYXlIZWFkaW5nKTtcbiAgICAgIH1cbiAgICAgIGlmIChwcm9qZWN0TGlzdFtpXS5kYXRlID4gdG9kYXkgJiYgdG9kYXlHcm91cCA9PT0gMSkge1xuICAgICAgICB0b2RheUdyb3VwID0gbnVsbDtcbiAgICAgICAgY29uc3QgbGluZUJyZWFrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKTtcbiAgICAgICAgRE9NLm1haW4uYXBwZW5kKGxpbmVCcmVhayk7XG4gICAgICB9XG4gICAgICBET00ubWFpbi5hcHBlbmQocmVuZGVyQ2FyZChwcm9qZWN0TGlzdFtpXSkpO1xuICAgICAgbWFzdGVyTGlzdC5kaXNwbGF5ZWRMaXN0LnB1c2gocHJvamVjdExpc3RbaV0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hc3Rlckxpc3QuZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKG1hc3Rlckxpc3QuZGF0YVtpXS5kYXRlID49IHRvbW9ycm93ICYmIG9wdGlvbiA9PT0gJ3RvZGF5Jykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChtYXN0ZXJMaXN0LmRhdGFbaV0uZGF0ZSA+IHdlZWtGcm9tVG9kYXkgJiYgb3B0aW9uID09PSAndGhpcy13ZWVrJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFBhc3QtRHVlIFVuZG9uZSBCbG9ja1xuICAgICAgaWYgKG1hc3Rlckxpc3QuZGF0YVtpXS5kYXRlIDwgdG9kYXlcbiAgICAgICAgJiYgcGFzdER1ZSA9PSBudWxsXG4gICAgICAgICYmIG1hc3Rlckxpc3QuZGF0YVtpXS5pc0NvbXBsZXRlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgcGFzdER1ZSA9IDE7XG4gICAgICAgIGNvbnN0IHBhc3REdWVIZWFkaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHBhc3REdWVIZWFkaW5nLmNsYXNzTGlzdC5hZGQoJ2hlYWRpbmcnKTtcbiAgICAgICAgcGFzdER1ZUhlYWRpbmcudGV4dENvbnRlbnQgPSAnUGFzdCBEdWUnO1xuICAgICAgICBET00ubWFpbi5hcHBlbmQocGFzdER1ZUhlYWRpbmcpO1xuICAgICAgfVxuXG4gICAgICBpZiAobWFzdGVyTGlzdC5kYXRhW2ldLmRhdGUgPj0gdG9kYXkgJiYgcGFzdER1ZSA9PT0gMSkge1xuICAgICAgICBwYXN0RHVlID0gMjtcbiAgICAgICAgY29uc3QgbGluZUJyZWFrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKTtcbiAgICAgICAgRE9NLm1haW4uYXBwZW5kKGxpbmVCcmVhayk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRvZGF5IEJsb2NrXG4gICAgICBpZiAobWFzdGVyTGlzdC5kYXRhW2ldLmRhdGUgPj0gdG9kYXlcbiAgICAgICAgJiYgbWFzdGVyTGlzdC5kYXRhW2ldLmRhdGUgPCB0b21vcnJvd1xuICAgICAgICAmJiB0b2RheUdyb3VwID09IG51bGwpIHtcbiAgICAgICAgdG9kYXlHcm91cCA9IDE7XG4gICAgICAgIGNvbnN0IHRvZGF5SGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0b2RheUhlYWRpbmcuY2xhc3NMaXN0LmFkZCgnaGVhZGluZycpO1xuICAgICAgICB0b2RheUhlYWRpbmcudGV4dENvbnRlbnQgPSAnVG9kYXknO1xuICAgICAgICBET00ubWFpbi5hcHBlbmQodG9kYXlIZWFkaW5nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1hc3Rlckxpc3QuZGF0YVtpXS5kYXRlID49IHRvbW9ycm93ICYmIHRvZGF5R3JvdXAgPT0gMSkge1xuICAgICAgICB0b2RheUdyb3VwID0gMjtcbiAgICAgICAgY29uc3QgbGluZUJyZWFrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKTtcbiAgICAgICAgRE9NLm1haW4uYXBwZW5kKGxpbmVCcmVhayk7XG4gICAgICB9XG5cbiAgICAgIGlmIChtYXN0ZXJMaXN0LmRhdGFbaV0uZGF0ZSA8PSB3ZWVrRnJvbVRvZGF5XG4gICAgICAgICYmIG1hc3Rlckxpc3QuZGF0YVtpXS5kYXRlID49IHRvbW9ycm93XG4gICAgICAgICYmIHdlZWtHcm91cCA9PSBudWxsKSB7XG4gICAgICAgIHdlZWtHcm91cCA9IDE7XG4gICAgICAgIGNvbnN0IHdlZWtIZWFkaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHdlZWtIZWFkaW5nLmNsYXNzTGlzdC5hZGQoJ2hlYWRpbmcnKTtcbiAgICAgICAgd2Vla0hlYWRpbmcudGV4dENvbnRlbnQgPSAnVGhpcyBXZWVrJztcbiAgICAgICAgRE9NLm1haW4uYXBwZW5kKHdlZWtIZWFkaW5nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1hc3Rlckxpc3QuZGF0YVtpXS5kYXRlID4gd2Vla0Zyb21Ub2RheSAmJiB3ZWVrR3JvdXAgPT09IDEpIHtcbiAgICAgICAgd2Vla0dyb3VwID0gMjtcbiAgICAgICAgY29uc3QgbGluZUJyZWFrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKTtcbiAgICAgICAgRE9NLm1haW4uYXBwZW5kKGxpbmVCcmVhayk7XG4gICAgICB9XG5cbiAgICAgIGlmICgobWFzdGVyTGlzdC5kYXRhW2ldLmlzQ29tcGxldGVkID09PSBmYWxzZVxuICAgICAgICAmJiBtYXN0ZXJMaXN0LmRhdGFbaV0uZGF0ZSA8IHRvZGF5KVxuICAgICAgICB8fCBtYXN0ZXJMaXN0LmRhdGFbaV0uZGF0ZSA+PSB0b2RheSkge1xuICAgICAgICBET00ubWFpbi5hcHBlbmQocmVuZGVyQ2FyZChtYXN0ZXJMaXN0LmRhdGFbaV0pKTtcbiAgICAgICAgbWFzdGVyTGlzdC5kaXNwbGF5ZWRMaXN0LnB1c2gobWFzdGVyTGlzdC5kYXRhW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckFkZFRhc2tNb2RhbChzb21lRGl2LCBhcnJheU9mUHJvamVjdE5hbWVzKSB7XG4gIGNvbnN0IGFkZFRhc2tNb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBhZGRUYXNrTW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwnKTtcbiAgYWRkVGFza01vZGFsLmNsYXNzTGlzdC5hZGQoJ2Nsb3NlZCcpO1xuICBhZGRUYXNrTW9kYWwuaWQgPSAnYWRkLWEtdGFzay1tb2RhbCc7XG5cbiAgY29uc3QgYWRkVGFza01vZGFsQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBhZGRUYXNrTW9kYWxDb250ZW50LmNsYXNzTGlzdC5hZGQoJ21vZGFsLWNvbnRlbnQnKTtcblxuICBjb25zdCB0YXNrRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgdGFza0Zvcm0uaWQgPSAndGFzay1mb3JtJztcblxuICBjb25zdCBlbXB0eURpdjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZW1wdHlEaXYxLnRleHRDb250ZW50ID0gJyAnO1xuICBjb25zdCBlbXB0eURpdjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZW1wdHlEaXYyLnRleHRDb250ZW50ID0gJyAnO1xuICBjb25zdCBjbG9zZU1vZGFsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNsb3NlTW9kYWxCdXR0b24uaWQgPSAnY2xvc2UtbW9kYWwtYnV0dG9uJztcblxuICBjbG9zZU1vZGFsQnV0dG9uLmlubmVySFRNTCA9ICcmdGltZXMnO1xuXG4gIGNvbnN0IGVtcHR5RGl2MyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBlbXB0eURpdjMudGV4dENvbnRlbnQgPSAnICc7XG4gIGNvbnN0IGxhYmVsRm9yVGFza0NvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICBsYWJlbEZvclRhc2tDb250ZW50LmZvciA9ICd0YXNrLWNvbnRlbnQnO1xuICBsYWJlbEZvclRhc2tDb250ZW50LnRleHRDb250ZW50ID0gJ1Rhc2s6JztcblxuICBjb25zdCB0YXNrQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIHRhc2tDb250ZW50LnR5cGUgPSAndGV4dCc7XG4gIHRhc2tDb250ZW50LmlkID0gJ3Rhc2stY29udGVudCc7XG4gIHRhc2tDb250ZW50Lm5hbWUgPSAndGFzay1jb250ZW50JztcbiAgdGFza0NvbnRlbnQucGxhY2Vob2xkZXIgPSAnRW50ZXIgVGFzayc7XG4gIHRhc2tDb250ZW50LnJlcXVpcmVkID0gdHJ1ZTtcbiAgY29uc3QgZW1wdHlEaXY0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGVtcHR5RGl2NC50ZXh0Q29udGVudCA9ICcgJztcblxuICBjb25zdCBsYWJlbEZvckRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICBsYWJlbEZvckRhdGUuZm9yID0gJ2RhdGUnO1xuICBsYWJlbEZvckRhdGUudGV4dENvbnRlbnQgPSAnRHVlOic7XG4gIGNvbnN0IGVtcHR5RGl2NSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBlbXB0eURpdjUudGV4dENvbnRlbnQgPSAnICc7XG5cbiAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIGRhdGUudHlwZSA9ICdkYXRlJztcbiAgZGF0ZS5pZCA9ICdkYXRlJztcbiAgZGF0ZS5uYW1lID0gJ2RhdGUnO1xuICBkYXRlLnJlcXVpcmVkID0gdHJ1ZTtcbiAgY29uc3QgZW1wdHlEaXY2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGVtcHR5RGl2Ni50ZXh0Q29udGVudCA9ICcgJztcblxuICBjb25zdCBwcmlvcml0eVRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHByaW9yaXR5VGl0bGUudGV4dENvbnRlbnQgPSAnUHJpb3JpdHk6JztcblxuICBjb25zdCBwcmlvcml0eU9wdGlvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgcHJpb3JpdHlPcHRpb25zLmlkID0gJ3ByaW9yaXR5LW9wdGlvbnMnO1xuXG4gIGNvbnN0IG9wdGlvbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29uc3Qgbm9ybWFsUmFkaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBub3JtYWxSYWRpby50eXBlID0gJ3JhZGlvJztcbiAgbm9ybWFsUmFkaW8uaWQgPSAnbm9ybWFsJztcbiAgbm9ybWFsUmFkaW8ubmFtZSA9ICdwcmlvcml0eSc7XG4gIG5vcm1hbFJhZGlvLnZhbHVlID0gJ25vcm1hbCc7XG4gIG5vcm1hbFJhZGlvLnJlcXVpcmVkID0gdHJ1ZTtcblxuICBjb25zdCBub3JtYWxSYWRpb0xhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgbm9ybWFsUmFkaW9MYWJlbC5mb3IgPSAnbm9ybWFsJztcbiAgbm9ybWFsUmFkaW9MYWJlbC50ZXh0Q29udGVudCA9ICdOb3JtYWwnO1xuXG4gIGNvbnN0IG9wdGlvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29uc3QgaGlnaFJhZGlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgaGlnaFJhZGlvLnR5cGUgPSAncmFkaW8nO1xuICBoaWdoUmFkaW8uaWQgPSAnaGlnaCc7XG4gIGhpZ2hSYWRpby5uYW1lID0gJ3ByaW9yaXR5JztcbiAgaGlnaFJhZGlvLnZhbHVlID0gJ2hpZ2gnO1xuICBoaWdoUmFkaW8ucmVxdWlyZWQgPSB0cnVlO1xuXG4gIGNvbnN0IGhpZ2hSYWRpb0xhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgaGlnaFJhZGlvTGFiZWwuZm9yID0gJ2hpZ2gnO1xuICBoaWdoUmFkaW9MYWJlbC50ZXh0Q29udGVudCA9ICdIaWdoJztcblxuICBjb25zdCBhc3NpZ25Ub1Byb2plY3RMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gIGFzc2lnblRvUHJvamVjdExhYmVsLmZvciA9ICdwcm9qZWN0JztcbiAgYXNzaWduVG9Qcm9qZWN0TGFiZWwudGV4dENvbnRlbnQgPSAnUHJvamVjdDonO1xuXG4gIGNvbnN0IGFzc2lnblRvUHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIGFzc2lnblRvUHJvamVjdC5uYW1lID0gJ3Byb2plY3QnO1xuICBhc3NpZ25Ub1Byb2plY3QuaWQgPSAncHJvamVjdCc7XG4gIGFzc2lnblRvUHJvamVjdC5wbGFjZWhvbGRlciA9ICdPcHRpb25hbCc7XG4gIGFzc2lnblRvUHJvamVjdC5zZXRBdHRyaWJ1dGUoJ2xpc3QnLCAncHJvamVjdC1saXN0Jyk7XG5cbiAgY29uc3QgYXNzaWduVG9Qcm9qZWN0RGF0YUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkYXRhbGlzdCcpO1xuICBhc3NpZ25Ub1Byb2plY3REYXRhTGlzdC5pZCA9ICdwcm9qZWN0LWxpc3QnO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlPZlByb2plY3ROYW1lcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgIG9wdGlvbi52YWx1ZSA9IGFycmF5T2ZQcm9qZWN0TmFtZXNbaV07XG4gICAgb3B0aW9uLnRleHRDb250ZW50ID0gYXJyYXlPZlByb2plY3ROYW1lc1tpXTtcbiAgICBhc3NpZ25Ub1Byb2plY3REYXRhTGlzdC5hcHBlbmQob3B0aW9uKTtcbiAgfVxuXG4gIGFzc2lnblRvUHJvamVjdC5hcHBlbmQoYXNzaWduVG9Qcm9qZWN0RGF0YUxpc3QpO1xuXG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBzdWJtaXRCdG4udHlwZSA9ICdzdWJtaXQnO1xuICBzdWJtaXRCdG4uaWQgPSAnbW9kYWwtc3VibWl0JztcbiAgc3VibWl0QnRuLnZhbHVlID0gJ1N1Ym1pdCc7XG4gIHN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9ICdTdWJtaXQnO1xuXG4gIG9wdGlvbjEuYXBwZW5kKG5vcm1hbFJhZGlvLCBub3JtYWxSYWRpb0xhYmVsKTtcbiAgb3B0aW9uMi5hcHBlbmQoaGlnaFJhZGlvLCBoaWdoUmFkaW9MYWJlbCk7XG4gIHByaW9yaXR5T3B0aW9ucy5hcHBlbmQob3B0aW9uMSwgb3B0aW9uMik7XG4gIHRhc2tGb3JtLmFwcGVuZChcbiAgICBlbXB0eURpdjEsXG4gICAgZW1wdHlEaXYyLFxuICAgIGNsb3NlTW9kYWxCdXR0b24sXG4gICAgbGFiZWxGb3JUYXNrQ29udGVudCxcbiAgICB0YXNrQ29udGVudCxcbiAgICBlbXB0eURpdjMsXG4gICAgbGFiZWxGb3JEYXRlLFxuICAgIGRhdGUsXG4gICAgZW1wdHlEaXY0LFxuXG4gICAgcHJpb3JpdHlUaXRsZSxcbiAgICBwcmlvcml0eU9wdGlvbnMsXG4gICAgZW1wdHlEaXY1LFxuXG4gICAgYXNzaWduVG9Qcm9qZWN0TGFiZWwsXG4gICAgYXNzaWduVG9Qcm9qZWN0LFxuICAgIGVtcHR5RGl2NixcblxuICAgIHN1Ym1pdEJ0bixcbiAgKTtcbiAgYWRkVGFza01vZGFsQ29udGVudC5hcHBlbmQodGFza0Zvcm0pO1xuICBhZGRUYXNrTW9kYWwuYXBwZW5kKGFkZFRhc2tNb2RhbENvbnRlbnQpO1xuICBzb21lRGl2LmFwcGVuZChhZGRUYXNrTW9kYWwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU2lkZUJhcihhcnJheU9mUHJvamVjdE5hbWVzKSB7XG4gIC8vIFJlbW92ZSB0aGUgZXhpc3RpbmdQcm9qZWN0c1xuICB3aGlsZSAoRE9NLnNpZGViYXJQcm9qZWN0TGlzdC5sZW5ndGgpIHtcbiAgICBET00ubGlzdEJ5UHJvamVjdC5yZW1vdmVDaGlsZChET00ubGlzdEJ5UHJvamVjdC5sYXN0Q2hpbGQpO1xuICB9XG5cbiAgY29uc3QgbWFrZUxpbmsgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIGNvbnN0IGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICBjb25zdCBpdGVtQW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGl0ZW1BbmNob3IuaWQgPSBuYW1lO1xuICAgIGl0ZW1BbmNob3IuaHJlZiA9ICcjJztcbiAgICBpdGVtQW5jaG9yLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBjb25zdCByZW1vdmVQcm9qZWN0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIHJlbW92ZVByb2plY3RCdG4uaWQgPSBgJHtuYW1lfVJlbW92ZWA7XG4gICAgcmVtb3ZlUHJvamVjdEJ0bi5ocmVmID0gJyMnO1xuICAgIHJlbW92ZVByb2plY3RCdG4uY2xhc3NMaXN0LmFkZCgnbWF0ZXJpYWwtaWNvbnMnKTtcbiAgICByZW1vdmVQcm9qZWN0QnRuLnRleHRDb250ZW50ID0gJ2RlbGV0ZSc7XG4gICAgbGlzdEl0ZW0uYXBwZW5kKGl0ZW1BbmNob3IsIHJlbW92ZVByb2plY3RCdG4pO1xuICAgIERPTS5saXN0QnlQcm9qZWN0LmFwcGVuZChsaXN0SXRlbSk7XG4gIH07XG5cbiAgaWYgKGFycmF5T2ZQcm9qZWN0TmFtZXMpIHtcbiAgICBhcnJheU9mUHJvamVjdE5hbWVzLmZvckVhY2goKGEpID0+IHsgbWFrZUxpbmsoYSk7IH0pO1xuICB9XG59XG4iLCJjb25zdCBjdXJyZW50U2V0dGluZ3MgPSB7XG4gIHZpZXdCeTogJ2FsbCcsXG4gIHdoaWNoUHJvamVjdDogbnVsbCxcblxuICB1cGRhdGUobmV3Vmlldywgd2hpY2hQID0gbnVsbCkge1xuICAgIHRoaXMudmlld0J5ID0gbmV3VmlldztcbiAgICB0aGlzLndoaWNoUHJvamVjdCA9IHdoaWNoUDtcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGN1cnJlbnRTZXR0aW5ncztcbiIsImltcG9ydCBtYXN0ZXJMaXN0IGZyb20gJy4vbWFzdGVyTGlzdCc7XG5pbXBvcnQgeyByZW5kZXJNYWluLCByZW5kZXJTaWRlQmFyIH0gZnJvbSAnLi9yZW5kZXInO1xuaW1wb3J0IG1ha2VUYXNrIGZyb20gJy4vdGFzayc7XG5pbXBvcnQgY3VycmVudFNldHRpbmdzIGZyb20gJy4vY3VycmVudFNldHRpbmdzJztcbmltcG9ydCBET00gZnJvbSAnLi9ET01DYWNoZSc7XG5cbmxldCBlZGl0dGluZyA9IGZhbHNlO1xubGV0IElETnVtYmVyID0gbnVsbDtcblxuZnVuY3Rpb24gYWRkQ2FyZEV2ZW50TGlzdGVuZXJzKHRhc2spIHtcbiAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pZD1cIiR7dGFzay5pZH1cIl0gaW5wdXRgKTtcbiAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKGJveCkge1xuICAgIElETnVtYmVyID0gYm94LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcbiAgICBjb25zdCByZXRyaWV2ZWRUYXNrID0gbWFzdGVyTGlzdC5kYXRhLmZpbHRlcigoZSkgPT4gKGUuaWQgPT0gSUROdW1iZXIpKVswXTtcbiAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICByZXRyaWV2ZWRUYXNrLmlzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgIGJveC50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1jb21wbGV0ZWQnKTtcbiAgICAgIG1hc3Rlckxpc3QuZWRpdFRhc2socmV0cmlldmVkVGFzaywgJ2lzQ29tcGxldGVkJywgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHJpZXZlZFRhc2suaXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgIGJveC50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1jb21wbGV0ZWQnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IGVkaXRUYXNrID0gKGUpID0+IHtcbiAgICBlZGl0dGluZyA9IHRydWU7XG4gICAgSUROdW1iZXIgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuICAgIGNvbnN0IHRhc2tUb0VkaXQgPSBtYXN0ZXJMaXN0LmRhdGEuZmlsdGVyKChlKSA9PiAoZS5pZCA9PSBJRE51bWJlcikpWzBdO1xuICAgIGNvbnN0IHl5eXkgPSB0YXNrVG9FZGl0LmRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtbSA9IHRhc2tUb0VkaXQuZGF0ZS5nZXRNb250aCgpICsgMTtcbiAgICBjb25zdCBkZCA9IHRhc2tUb0VkaXQuZGF0ZS5nZXREYXRlKCk7XG4gICAgbGV0IHRhc2tEYXRlID0gU3RyaW5nKDEwMDAwICogeXl5eSArIDEwMCAqIG1tICsgZGQpO1xuICAgIHRhc2tEYXRlID0gYCR7dGFza0RhdGUuc2xpY2UoMCwgNCl9LSR7dGFza0RhdGUuc2xpY2UoXG4gICAgICA0LFxuICAgICAgNixcbiAgICApfS0ke3Rhc2tEYXRlLnNsaWNlKDYsIDgpfWA7XG4gICAgRE9NLm5ld1Rhc2tDb250ZW50LnZhbHVlID0gdGFza1RvRWRpdC5jb250ZW50O1xuICAgIERPTS5uZXdUYXNrRGF0ZS52YWx1ZSA9IHRhc2tEYXRlO1xuICAgIERPTS5uZXdUYXNrUHJvamVjdC52YWx1ZSA9IHRhc2tUb0VkaXQucHJvamVjdDtcbiAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBET00ubmV3VGFza1ByaW9yaXR5KSB7XG4gICAgICBpZiAob3B0aW9uLnZhbHVlID09PSB0YXNrLnByaW9yaXR5KSB7XG4gICAgICAgIG9wdGlvbi5jaGVja2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgRE9NLmFkZFRhc2tNb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCdjbG9zZWQnKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVUYXNrID0gKGUpID0+IHtcbiAgICBJRE51bWJlciA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XG4gICAgY29uc3QgdGFza1RvRGVsZXRlID0gbWFzdGVyTGlzdC5kYXRhLmZpbHRlcigodCkgPT4gKHQuaWQgPT0gSUROdW1iZXIpKVswXTtcbiAgICBtYXN0ZXJMaXN0LnJlbW92ZVRhc2sodGFza1RvRGVsZXRlKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnb2xkRGF0YScsIEpTT04uc3RyaW5naWZ5KG1hc3Rlckxpc3QuZGF0YSkpO1xuICAgIG1hc3Rlckxpc3QuZGlzcGxheWVkTGlzdC5zcGxpY2UoXG4gICAgICBtYXN0ZXJMaXN0LmRpc3BsYXllZExpc3QuaW5kZXhPZih0YXNrVG9EZWxldGUpLFxuICAgICAgMSxcbiAgICApO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgJ29sZERpc3BsYXlMaXN0JyxcbiAgICAgIEpTT04uc3RyaW5naWZ5KG1hc3Rlckxpc3QuZGlzcGxheWVkTGlzdCksXG4gICAgKTtcbiAgICByZW5kZXJNYWluKFxuICAgICAgbWFzdGVyTGlzdCxcbiAgICAgIGN1cnJlbnRTZXR0aW5ncy52aWV3QnksXG4gICAgICBjdXJyZW50U2V0dGluZ3Mud2hpY2hQcm9qZWN0LFxuICAgICk7XG4gICAgYWRkTWFpbkV2ZW50TGlzdGVuZXJzKCk7XG4gIH07XG5cbiAgY29uc3QgZWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLWlkPVwiJHt0YXNrLmlkfVwiXSBidXR0b25gKVswXTtcbiAgZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVkaXRUYXNrKTtcblxuICBjb25zdCByZW1vdmVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgIGBbZGF0YS1pZD1cIiR7dGFzay5pZH1cIl0gYnV0dG9uYCxcbiAgKVsxXTtcbiAgcmVtb3ZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtb3ZlVGFzayk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRNYWluRXZlbnRMaXN0ZW5lcnMoKSB7XG4gIGZvciAoY29uc3QgaXRlbSBvZiBtYXN0ZXJMaXN0LmRpc3BsYXllZExpc3QpIHtcbiAgICBhZGRDYXJkRXZlbnRMaXN0ZW5lcnMoaXRlbSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFNpZGVUaW1lRXZlbnRMaXN0ZW5lcnMoKSB7XG4gIHRyeSB7XG4gICAgRE9NLnRvZGF5c1Rhc2tzU2lkZUJhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGN1cnJlbnRTZXR0aW5ncy51cGRhdGUoJ3RvZGF5JywgbnVsbCk7XG4gICAgICByZW5kZXJNYWluKFxuICAgICAgICBtYXN0ZXJMaXN0LFxuICAgICAgICBjdXJyZW50U2V0dGluZ3Mudmlld0J5LFxuICAgICAgICBjdXJyZW50U2V0dGluZ3Mud2hpY2hQcm9qZWN0LFxuICAgICAgKTtcbiAgICAgIGFkZE1haW5FdmVudExpc3RlbmVycygpO1xuICAgIH0pO1xuXG4gICAgRE9NLnRoaXNXZWVrU2lkZUJhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGN1cnJlbnRTZXR0aW5ncy51cGRhdGUoJ3RoaXMtd2VlaycsIG51bGwpO1xuICAgICAgcmVuZGVyTWFpbihcbiAgICAgICAgbWFzdGVyTGlzdCxcbiAgICAgICAgY3VycmVudFNldHRpbmdzLnZpZXdCeSxcbiAgICAgICAgY3VycmVudFNldHRpbmdzLndoaWNoUHJvamVjdCxcbiAgICAgICk7XG4gICAgICBhZGRNYWluRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9KTtcblxuICAgIERPTS5hbGxUYXNrc1NpZGVCYXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjdXJyZW50U2V0dGluZ3MudXBkYXRlKCdhbGwnLCBudWxsKTtcbiAgICAgIHJlbmRlck1haW4oXG4gICAgICAgIG1hc3Rlckxpc3QsXG4gICAgICAgIGN1cnJlbnRTZXR0aW5ncy52aWV3QnksXG4gICAgICAgIGN1cnJlbnRTZXR0aW5ncy53aGljaFByb2plY3QsXG4gICAgICApO1xuICAgICAgYWRkTWFpbkV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfSk7XG4gIH0gY2F0Y2gge1xuICAgIGNvbnNvbGUubG9nKCdmYWlsZWQgdG8gYWRkIHRvZGF5L3dlZWsvYWxsIEVMcycpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRTaWRlUHJvamVjdEV2ZW50TGlzdGVuZXJzKCkge1xuICBjb25zdCByZW1vdmVUaGlzID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoY29uZmlybSgnRGVsZXRlIHRoaXMgcHJvamVjdCBhbmQgYWxsIHRhc2tzIGluIGl0PycpKSB7XG4gICAgICBjb25zdCB0YXNrc1RvUmVtb3ZlID0gbWFzdGVyTGlzdC5wcm9kdWNlUHJvamVjdExpc3QoXG4gICAgICAgIGUudGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaWQsXG4gICAgICApO1xuICAgICAgdGFza3NUb1JlbW92ZS5mb3JFYWNoKChpdGVtKSA9PiBtYXN0ZXJMaXN0LnJlbW92ZVRhc2soaXRlbSkpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ29sZERhdGEnLCBKU09OLnN0cmluZ2lmeShtYXN0ZXJMaXN0LmRhdGEpKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICAnb2xkRGlzcGxheUxpc3QnLFxuICAgICAgICBKU09OLnN0cmluZ2lmeShtYXN0ZXJMaXN0LmRpc3BsYXllZExpc3QpLFxuICAgICAgKTtcbiAgICAgIHJlbmRlck1haW4oXG4gICAgICAgIG1hc3Rlckxpc3QsXG4gICAgICAgIERPTS5tYWluLFxuICAgICAgICBjdXJyZW50U2V0dGluZ3Mudmlld0J5LFxuICAgICAgICBjdXJyZW50U2V0dGluZ3Mud2hpY2hQcm9qZWN0LFxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKG1hc3Rlckxpc3QuZ2V0TGlzdE9mUHJvamVjdHMoKSk7XG4gICAgICByZW5kZXJTaWRlQmFyKG1hc3Rlckxpc3QuZ2V0TGlzdE9mUHJvamVjdHMoKSk7XG4gICAgICBhZGRTaWRlUHJvamVjdEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICBhZGRNYWluRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgIGNvbnNvbGUubG9nKG1hc3Rlckxpc3QuZ2V0TGlzdE9mUHJvamVjdHMoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdZb3UgcHJlc3NlZCBDYW5jZWwhJyk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFNpZGVCYXIgUHJvamVjdCBOYW1lIEVMc1xuICB0cnkge1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBET00uc2lkZWJhclByb2plY3RMaXN0KSB7XG4gICAgICBjb25zdCBwcm9qZWN0TGluayA9IGl0ZW07XG4gICAgICBwcm9qZWN0TGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY3VycmVudFNldHRpbmdzLnVwZGF0ZSgnYnlQcm9qZWN0JywgcHJvamVjdExpbmsuaWQpO1xuICAgICAgICByZW5kZXJNYWluKFxuICAgICAgICAgIG1hc3Rlckxpc3QsXG4gICAgICAgICAgY3VycmVudFNldHRpbmdzLnZpZXdCeSxcbiAgICAgICAgICBjdXJyZW50U2V0dGluZ3Mud2hpY2hQcm9qZWN0LFxuICAgICAgICApO1xuICAgICAgICBhZGRNYWluRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgRE9NLnNpZGViYXJQcm9qZWN0TGlzdFJlbW92ZUJ0bnMpIHtcbiAgICAgIGNvbnN0IHByb2plY3RMaW5rUm0gPSBpdGVtO1xuICAgICAgcHJvamVjdExpbmtSbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjdXJyZW50U2V0dGluZ3Mudmlld0J5ID09PSAnYnlQcm9qZWN0J1xuICAgICAgICAgICYmIGN1cnJlbnRTZXR0aW5ncy53aGljaFByb2plY3RcbiAgICAgICAgICAgID09PSBwcm9qZWN0TGlua1JtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgY3VycmVudFNldHRpbmdzLnVwZGF0ZSgnYWxsJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlVGhpcyhlKTtcbiAgICAgICAgcmVuZGVyTWFpbihcbiAgICAgICAgICBtYXN0ZXJMaXN0LFxuICAgICAgICAgIGN1cnJlbnRTZXR0aW5ncy52aWV3QnksXG4gICAgICAgICAgY3VycmVudFNldHRpbmdzLndoaWNoUHJvamVjdCxcbiAgICAgICAgKTtcbiAgICAgICAgYWRkTWFpbkV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHJlbmRlclNpZGVCYXIobWFzdGVyTGlzdC5nZXRMaXN0T2ZQcm9qZWN0cygpKTtcbiAgICAgICAgYWRkU2lkZVByb2plY3RFdmVudExpc3RlbmVycygpO1xuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICBjb25zb2xlLmxvZygnZmFpbGVkIHRvIGFkZCBFTHMgdG8gcHJvamVjdHMnKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkSW5pdGlhbEV2ZW50TGlzdGVuZXJzKCkge1xuICAvLyAgKioqIEFkZFRhc2tNb2RhbCBvcGVuLCBzdWJtaXQsIGFuZCBjbG9zZSBidG4gRUxzICoqKlxuICAvLyBDYWxsYmFjayBmb3IgU3VibWl0IEJ1dHRvbjpcbiAgY29uc3QgdGFza1N1Ym1pdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIERPTS5hZGRUYXNrTW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgnY2xvc2VkJyk7XG4gICAgaWYgKGVkaXR0aW5nKSB7XG4gICAgICBjb25zdCB0YXNrVG9FZGl0ID0gbWFzdGVyTGlzdC5kYXRhLmZpbHRlcigoZSkgPT4gKGUuaWQgPT0gSUROdW1iZXIpKVswXTtcbiAgICAgIG1hc3Rlckxpc3QuZWRpdFRhc2sodGFza1RvRWRpdCwgJ2NvbnRlbnQnLCBET00ubmV3VGFza0NvbnRlbnQudmFsdWUpO1xuICAgICAgbGV0IHRhc2tEYXRlID0gbmV3IERhdGUoRE9NLm5ld1Rhc2tEYXRlLnZhbHVlKTtcbiAgICAgIHRhc2tEYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApOyAgXG4gICAgICBtYXN0ZXJMaXN0LmVkaXRUYXNrKHRhc2tUb0VkaXQsICdkYXRlJywgdGFza0RhdGUpO1xuICAgICAgY29uc3Qgb3B0aW9uID0gQXJyYXkuZnJvbShET00ubmV3VGFza1ByaW9yaXR5KS5maWx0ZXIoXG4gICAgICAgIChwcmlvcml0eUxldmVsKSA9PiBwcmlvcml0eUxldmVsLmNoZWNrZWQsXG4gICAgICApWzBdO1xuICAgICAgbWFzdGVyTGlzdC5lZGl0VGFzayh0YXNrVG9FZGl0LCAncHJpb3JpdHknLCBvcHRpb24udmFsdWUpO1xuICAgICAgbWFzdGVyTGlzdC5lZGl0VGFzayh0YXNrVG9FZGl0LCAncHJvamVjdCcsIERPTS5uZXdUYXNrUHJvamVjdC52YWx1ZSk7XG4gICAgICBtYXN0ZXJMaXN0LnNvcnRCeURhdGUoKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdvbGREYXRhJywgSlNPTi5zdHJpbmdpZnkobWFzdGVyTGlzdC5kYXRhKSk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgICAgJ29sZERpc3BsYXlMaXN0JyxcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkobWFzdGVyTGlzdC5kaXNwbGF5ZWRMaXN0KSxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBuZXdUYXNrUHJpb3JpdHlWYWx1ZSA9IG51bGw7XG4gICAgICBET00ubmV3VGFza1ByaW9yaXR5LmZvckVhY2goKG9wdGlvbikgPT4ge1xuICAgICAgICBpZiAob3B0aW9uLmNoZWNrZWQpIHtcbiAgICAgICAgICBuZXdUYXNrUHJpb3JpdHlWYWx1ZSA9IG9wdGlvbi52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjb25zdCBuZXdUYXNrID0gbWFrZVRhc2soXG4gICAgICAgIERPTS5uZXdUYXNrRGF0ZS52YWx1ZSxcbiAgICAgICAgRE9NLm5ld1Rhc2tDb250ZW50LnZhbHVlLFxuICAgICAgICBuZXdUYXNrUHJpb3JpdHlWYWx1ZSxcbiAgICAgICAgRE9NLm5ld1Rhc2tQcm9qZWN0LnZhbHVlLFxuICAgICAgKTtcbiAgICAgIG1hc3Rlckxpc3QuYWRkVGFzayhuZXdUYXNrKTtcbiAgICAgIG1hc3Rlckxpc3Quc29ydEJ5RGF0ZSgpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ29sZERhdGEnLCBKU09OLnN0cmluZ2lmeShtYXN0ZXJMaXN0LmRhdGEpKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICAnb2xkRGlzcGxheUxpc3QnLFxuICAgICAgICBKU09OLnN0cmluZ2lmeShtYXN0ZXJMaXN0LmRpc3BsYXllZExpc3QpLFxuICAgICAgKTtcbiAgICB9XG4gIFxuICAgIC8vIENsZWFyIHRoZSBtb2RhbCBpbnB1dCBmaWVsZHMgd2hlbiBtb2RhbCBpcyBzdWJtaXR0ZWRcbiAgICBET00ubmV3VGFza0NvbnRlbnQudmFsdWUgPSBudWxsO1xuICAgIERPTS5uZXdUYXNrRGF0ZS52YWx1ZSA9IG51bGw7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgZm9yIChjb25zdCBvcHRpb24gb2YgRE9NLm5ld1Rhc2tQcmlvcml0eSkge1xuICAgICAgb3B0aW9uLmNoZWNrZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgRE9NLm5ld1Rhc2tQcm9qZWN0LnZhbHVlID0gbnVsbDtcbiAgICByZW5kZXJNYWluKFxuICAgICAgbWFzdGVyTGlzdCxcbiAgICAgIERPTS5tYWluLFxuICAgICAgY3VycmVudFNldHRpbmdzLnZpZXdCeSxcbiAgICAgIGN1cnJlbnRTZXR0aW5ncy53aGljaFByb2plY3QsXG4gICAgKTtcbiAgICByZW5kZXJTaWRlQmFyKG1hc3Rlckxpc3QuZ2V0TGlzdE9mUHJvamVjdHMoKSk7XG4gICAgYWRkU2lkZVByb2plY3RFdmVudExpc3RlbmVycygpO1xuICAgIGFkZFNpZGVUaW1lRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBhZGRNYWluRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBtYXN0ZXJMaXN0LnNvcnRCeURhdGUoKTsgICAgXG4gIH07XG5cbiAgRE9NLmFkZFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZWRpdHRpbmcgPSBmYWxzZTtcbiAgICBET00uYWRkVGFza01vZGFsLmNsYXNzTGlzdC50b2dnbGUoJ2Nsb3NlZCcpO1xuICB9KTtcblxuICAvLyBDbGVhciB0aGUgbW9kYWwgaW5wdXQgZmllbGRzIHdoZW4gbW9kYWwgaXMgY2xvc2VkIGJ5IHRoZSB4XG4gIERPTS5jbG9zZU1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIERPTS5hZGRUYXNrTW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgnY2xvc2VkJyk7XG4gICAgRE9NLm5ld1Rhc2tDb250ZW50LnZhbHVlID0gbnVsbDtcbiAgICBET00ubmV3VGFza0RhdGUudmFsdWUgPSBudWxsO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIERPTS5uZXdUYXNrUHJpb3JpdHkpIHtcbiAgICAgIG9wdGlvbi5jaGVja2VkID0gZmFsc2U7XG4gICAgfVxuICAgIERPTS5uZXdUYXNrUHJvamVjdC52YWx1ZSA9IG51bGw7XG4gIH0pO1xuICBET00uYWRkVGFza0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGFza1N1Ym1pdCk7XG5cbiAgLy8gVG9kYXksIFdlZWssIGFuZCBBbGwgc2lkZUJhciBFTHNcbiAgdHJ5IHtcbiAgICBET00udG9kYXlzVGFza3NTaWRlQmFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY3VycmVudFNldHRpbmdzLnVwZGF0ZSgndG9kYXknLCBudWxsKTtcbiAgICAgIHJlbmRlck1haW4oXG4gICAgICAgIG1hc3Rlckxpc3QsXG4gICAgICAgIGN1cnJlbnRTZXR0aW5ncy52aWV3QnksXG4gICAgICAgIGN1cnJlbnRTZXR0aW5ncy53aGljaFByb2plY3QsXG4gICAgICApO1xuICAgICAgYWRkTWFpbkV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfSk7XG5cbiAgICBET00udGhpc1dlZWtTaWRlQmFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY3VycmVudFNldHRpbmdzLnVwZGF0ZSgndGhpcy13ZWVrJywgbnVsbCk7XG4gICAgICByZW5kZXJNYWluKFxuICAgICAgICBtYXN0ZXJMaXN0LFxuICAgICAgICBjdXJyZW50U2V0dGluZ3Mudmlld0J5LFxuICAgICAgICBjdXJyZW50U2V0dGluZ3Mud2hpY2hQcm9qZWN0LFxuICAgICAgKTtcbiAgICAgIGFkZE1haW5FdmVudExpc3RlbmVycygpO1xuICAgIH0pO1xuXG4gICAgRE9NLmFsbFRhc2tzU2lkZUJhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGN1cnJlbnRTZXR0aW5ncy51cGRhdGUoJ2FsbCcsIG51bGwpO1xuICAgICAgcmVuZGVyTWFpbihcbiAgICAgICAgbWFzdGVyTGlzdCxcbiAgICAgICAgY3VycmVudFNldHRpbmdzLnZpZXdCeSxcbiAgICAgICAgY3VycmVudFNldHRpbmdzLndoaWNoUHJvamVjdCxcbiAgICAgICk7XG4gICAgICBhZGRNYWluRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9KTtcbiAgfSBjYXRjaCB7XG4gICAgY29uc29sZS5sb2coJ2ZhaWxlZCB0byBhZGQgZXZlbnQgbGlzdGVuZXJzJyk7XG4gIH1cbn1cbiIsImltcG9ydCBtYWtlVGFzayBmcm9tICcuL3Rhc2snO1xuaW1wb3J0IG1hc3Rlckxpc3QgZnJvbSAnLi9tYXN0ZXJMaXN0JztcbmltcG9ydCB7IHJlbmRlck1haW4sIHJlbmRlckFkZFRhc2tNb2RhbCwgcmVuZGVyU2lkZUJhciB9IGZyb20gJy4vcmVuZGVyJztcbmltcG9ydCBET00gZnJvbSAnLi9ET01DYWNoZSc7XG5pbXBvcnQgeyBhZGRJbml0aWFsRXZlbnRMaXN0ZW5lcnMsIGFkZE1haW5FdmVudExpc3RlbmVycywgIGFkZFNpZGVUaW1lRXZlbnRMaXN0ZW5lcnMsICBhZGRTaWRlUHJvamVjdEV2ZW50TGlzdGVuZXJzICB9IGZyb20gJy4vYWRkRUxzLmpzJztcblxuY29uc3QgaW5pdGlhbFNldHVwID0gZnVuY3Rpb24gKCl7XG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIFxuICBjb25zdCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZSh0b2RheSk7XG4gIHllc3RlcmRheS5zZXREYXRlKHRvZGF5LmdldERhdGUoKSAtIDEpO1xuICBcbiAgY29uc3QgdG9tb3Jyb3cgPSBuZXcgRGF0ZSh0b2RheSk7XG4gIHRvbW9ycm93LnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgMSk7XG4gIFxuICBjb25zdCBkYXlBZnRlclRvbW9ycm93ID0gbmV3IERhdGUodG9kYXkpO1xuICBkYXlBZnRlclRvbW9ycm93LnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgMik7XG4gIFxuICBjb25zdCBsYXRlckRheSA9IG5ldyBEYXRlKHRvZGF5KTtcbiAgbGF0ZXJEYXkuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgKyA4KTtcbiAgXG4gIGNvbnN0IHNhbXBsZVRhc2sxID0gIG1ha2VUYXNrKHRvZGF5LCAnUmVmYWN0b3IgdGljLXRhYy10b2UgcHJvZ3JhbScsICdub3JtYWwnKTtcbiAgY29uc3Qgc2FtcGxlVGFzazIgPSAgbWFrZVRhc2sodG9kYXksICdCdXkgbWlsaycsICdoaWdoJyk7XG4gIGNvbnN0IHNhbXBsZVRhc2szID0gIG1ha2VUYXNrKHRvbW9ycm93LCAnQnV5IGJpcnRoZGF5IGNhcmQnLCAnbm9ybWFsJyk7XG4gIGNvbnN0IHNhbXBsZVRhc2s0ID0gIG1ha2VUYXNrKHRvbW9ycm93LCAnQ2FsbCBtb20nLCAnaGlnaCcpO1xuICBjb25zdCBzYW1wbGVUYXNrNSA9ICBtYWtlVGFzayh0b21vcnJvdywgJ0RvIFJ1YnkgYmVnaW5uZXIgdHV0b3JpYWwnLCAnbm9ybWFsJyk7XG4gIGNvbnN0IHNhbXBsZVRhc2s2ID0gIG1ha2VUYXNrKHllc3RlcmRheSwgJ1ZhY3V1bScsICdoaWdoJyk7XG4gIGNvbnN0IHNhbXBsZVRhc2s3ID0gIG1ha2VUYXNrKGxhdGVyRGF5LCAnUGFpbnQgdGhlIHNoZWQnLCAnaGlnaCcpO1xuICBcbiAgbWFzdGVyTGlzdC5kYXRhLnB1c2goc2FtcGxlVGFzazEpO1xuICBtYXN0ZXJMaXN0LmRhdGEucHVzaChzYW1wbGVUYXNrMik7XG4gIG1hc3Rlckxpc3QuZGF0YS5wdXNoKHNhbXBsZVRhc2szKTtcbiAgbWFzdGVyTGlzdC5kYXRhLnB1c2goc2FtcGxlVGFzazQpO1xuICBtYXN0ZXJMaXN0LmRhdGEucHVzaChzYW1wbGVUYXNrNSk7XG4gIG1hc3Rlckxpc3QuZGF0YS5wdXNoKHNhbXBsZVRhc2s2KTtcbiAgbWFzdGVyTGlzdC5kYXRhLnB1c2goc2FtcGxlVGFzazcpO1xuICBcbiAgbWFzdGVyTGlzdC5lZGl0VGFzayhzYW1wbGVUYXNrMSwgJ3Byb2plY3QnLCAnQ29kaW5nJyk7XG4gIG1hc3Rlckxpc3QuZWRpdFRhc2soc2FtcGxlVGFzazIsICdwcm9qZWN0JywgJ1Nob3BwaW5nJyk7XG4gIG1hc3Rlckxpc3QuZWRpdFRhc2soc2FtcGxlVGFzazMsICdwcm9qZWN0JywgJ1Nob3BwaW5nJyk7XG4gIG1hc3Rlckxpc3QuZWRpdFRhc2soc2FtcGxlVGFzazUsICdwcm9qZWN0JywgJ0NvZGluZycpO1xuICBtYXN0ZXJMaXN0LmVkaXRUYXNrKHNhbXBsZVRhc2s2LCAncHJvamVjdCcsICdIb3VzZXdvcmsnKTtcbiAgbWFzdGVyTGlzdC5lZGl0VGFzayhzYW1wbGVUYXNrNywgJ3Byb2plY3QnLCAnSG91c2V3b3JrJyk7XG4gIFxuICBtYXN0ZXJMaXN0LnNvcnRCeURhdGUoKTtcbiAgcmVuZGVyTWFpbihtYXN0ZXJMaXN0LCAndG9kYXknLCBudWxsKTtcbiAgcmVuZGVyQWRkVGFza01vZGFsKERPTS5ib2R5LCBtYXN0ZXJMaXN0LmdldExpc3RPZlByb2plY3RzKCkpO1xuICByZW5kZXJTaWRlQmFyKG1hc3Rlckxpc3QuZ2V0TGlzdE9mUHJvamVjdHMoKSk7XG4gIFxuICBhZGRJbml0aWFsRXZlbnRMaXN0ZW5lcnMoKTtcbiAgYWRkTWFpbkV2ZW50TGlzdGVuZXJzKCk7XG4gIGFkZFNpZGVUaW1lRXZlbnRMaXN0ZW5lcnMoKTtcbiAgYWRkU2lkZVByb2plY3RFdmVudExpc3RlbmVycygpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBpbml0aWFsU2V0dXA7XG5cbiIsImltcG9ydCBpbml0aWFsU2V0dXAgZnJvbSBcIi4vaW5pdGlhbFNldHVwXCI7XG5cbmluaXRpYWxTZXR1cCgpOyJdLCJuYW1lcyI6WyJkYXRlIiwiY29udGVudCIsInByaW9yaXR5IiwicHJvamVjdCIsImlkIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidGFza0RhdGUiLCJEYXRlIiwic2V0SG91cnMiLCJpc0NvbXBsZXRlZCIsInNvcnRCeURhdGVUaGVuUHJpb3JpdHlUaGVuQWxwaGEiLCJhIiwiYiIsImJ5RGF0ZSIsImxvY2FsZUNvbXBhcmUiLCJkYXRhIiwic29ydEJ5RGF0ZSIsInNvcnQiLCJkaXNwbGF5ZWRMaXN0IiwiZWRpdFRhc2siLCJ0YXNrIiwiYXR0cmlidXRlIiwidmFsdWUiLCJpIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsInByb2R1Y2VUYXNrc0luQVByb2plY3QiLCJmaWx0ZXJlZCIsImZpbHRlciIsImdldExpc3RPZlByb2plY3RzIiwiYWxsUHJvamVjdHMiLCJmb3JFYWNoIiwic29tZSIsInB1c2giLCJyZW1vdmVUYXNrIiwidCIsInNwbGljZSIsImluZGV4T2YiLCJhZGRUYXNrIiwibWFpbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJvZHkiLCJzaWRlQmFyIiwidG9kYXlzVGFza3NTaWRlQmFyIiwidGhpc1dlZWtTaWRlQmFyIiwiYWxsVGFza3NTaWRlQmFyIiwiYWRkVGFza0J0biIsImFkZFRhc2tGb3JtIiwiYWRkVGFza01vZGFsIiwiY2xvc2VNb2RhbEJ1dHRvbiIsIm5ld1Rhc2tDb250ZW50IiwibmV3VGFza0RhdGUiLCJuZXdUYXNrUHJpb3JpdHkiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmV3VGFza1Byb2plY3QiLCJjYXJkRWRpdEJ0bnMiLCJjYXJkUmVtb3ZlQnRucyIsImNhcmRDaGVja0JveHMiLCJsaXN0QnlQcm9qZWN0Iiwic2lkZWJhclByb2plY3RMaXN0Iiwibm9kZUxpc3RPZlByb2plY3RMaW5rcyIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGRyZW4iLCJhcnIiLCJjaGlsZCIsImZpcnN0Q2hpbGQiLCJzaWRlYmFyUHJvamVjdExpc3RSZW1vdmVCdG5zIiwibGFzdENoaWxkIiwicmVuZGVyQ2FyZCIsImNoZWNrYm94IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJuYW1lIiwic2V0QXR0cmlidXRlIiwiY2hlY2tlZCIsInRhc2tOYW1lIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ0YXNrRHVlIiwidG9Mb2NhbGVTdHJpbmciLCJ3ZWVrZGF5IiwibW9udGgiLCJnZXREYXRlIiwiZWRpdEJ0biIsInJlbW92ZUJ0biIsImNhcmQiLCJhcHBlbmQiLCJwYXJlbnRFbGVtZW50IiwiY29udGFpbnMiLCJyZW1vdmUiLCJyZW5kZXJNYWluIiwibWFzdGVyTGlzdCIsIm9wdGlvbiIsImJ5UHJvamVjdE5hbWUiLCJ0b2RheSIsInRvbW9ycm93Iiwic2V0RGF0ZSIsIndlZWtGcm9tVG9kYXkiLCJ0b2RheUdyb3VwIiwicGFzdER1ZSIsIndlZWtHcm91cCIsInByb2plY3RMaXN0IiwicHJvamVjdEhlYWRpbmciLCJ0b2RheUhlYWRpbmciLCJsaW5lQnJlYWsiLCJwYXN0RHVlSGVhZGluZyIsIndlZWtIZWFkaW5nIiwicmVuZGVyU2lkZUJhciIsImFycmF5T2ZQcm9qZWN0TmFtZXMiLCJsaXN0SXRlbSIsIml0ZW1BbmNob3IiLCJocmVmIiwicmVtb3ZlUHJvamVjdEJ0biIsIm1ha2VMaW5rIiwidmlld0J5Iiwid2hpY2hQcm9qZWN0IiwidXBkYXRlIiwibmV3VmlldyIsIndoaWNoUCIsInRoaXMiLCJlZGl0dGluZyIsIklETnVtYmVyIiwiYWRkQ2FyZEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJveCIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsInJldHJpZXZlZFRhc2siLCJlIiwidGFza1RvRWRpdCIsInl5eXkiLCJnZXRGdWxsWWVhciIsIm1tIiwiZ2V0TW9udGgiLCJkZCIsIlN0cmluZyIsInNsaWNlIiwidGFza1RvRGVsZXRlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRNYWluRXZlbnRMaXN0ZW5lcnMiLCJpdGVtIiwiYWRkU2lkZVRpbWVFdmVudExpc3RlbmVycyIsImFkZFNpZGVQcm9qZWN0RXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVUaGlzIiwiY29uZmlybSIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJwcm9qZWN0TGluayIsInByb2plY3RMaW5rUm0iLCJ5ZXN0ZXJkYXkiLCJsYXRlckRheSIsInNhbXBsZVRhc2sxIiwic2FtcGxlVGFzazIiLCJzYW1wbGVUYXNrMyIsInNhbXBsZVRhc2s0Iiwic2FtcGxlVGFzazUiLCJzYW1wbGVUYXNrNiIsInNhbXBsZVRhc2s3Iiwic29tZURpdiIsImFkZFRhc2tNb2RhbENvbnRlbnQiLCJ0YXNrRm9ybSIsImVtcHR5RGl2MSIsImVtcHR5RGl2MiIsImlubmVySFRNTCIsImVtcHR5RGl2MyIsImxhYmVsRm9yVGFza0NvbnRlbnQiLCJmb3IiLCJ0YXNrQ29udGVudCIsInBsYWNlaG9sZGVyIiwicmVxdWlyZWQiLCJlbXB0eURpdjQiLCJsYWJlbEZvckRhdGUiLCJlbXB0eURpdjUiLCJlbXB0eURpdjYiLCJwcmlvcml0eVRpdGxlIiwicHJpb3JpdHlPcHRpb25zIiwib3B0aW9uMSIsIm5vcm1hbFJhZGlvIiwibm9ybWFsUmFkaW9MYWJlbCIsIm9wdGlvbjIiLCJoaWdoUmFkaW8iLCJoaWdoUmFkaW9MYWJlbCIsImFzc2lnblRvUHJvamVjdExhYmVsIiwiYXNzaWduVG9Qcm9qZWN0IiwiYXNzaWduVG9Qcm9qZWN0RGF0YUxpc3QiLCJzdWJtaXRCdG4iLCJyZW5kZXJBZGRUYXNrTW9kYWwiLCJwcmV2ZW50RGVmYXVsdCIsIkFycmF5IiwiZnJvbSIsInByaW9yaXR5TGV2ZWwiLCJuZXdUYXNrUHJpb3JpdHlWYWx1ZSIsIm5ld1Rhc2siLCJhZGRJbml0aWFsRXZlbnRMaXN0ZW5lcnMiXSwic291cmNlUm9vdCI6IiJ9